# 一次有趣的“安装系统”经历
2017/03/29 15:34:00
Misc


## 迟到的记录

其实这件事是22日发生的，距离现在已经一个礼拜了。之所以推迟这么久，主要是工作忙。倒也并不是忙得一点空闲都没有了，只是忙得没啥兴趣写文章了。

言归正传，作为一个“弄计算机的”，给人安装系统的事自然事没少做。跟人解释“写程序和装系统没有必然联系”，还不如直接照做，没准能节省点时间。

然而这次装系统有点意外，意外有二，一是找我帮忙的并不是小白，二是碰到的问题我之前也没见过。

于是就有了这次不一样的装系统经历。


## 定位问题

一开始也是抓瞎，开机检测没有问题，不会是部件松动，能进PE系统进行各种操作，所以主板和内存是没有问题的，之后的安装卡在某一步转圈，引导分区是好的，所以好像也不是硬盘问题。而且按经验判断，硬盘问题导致无法安装系统的，非常少见。

最开始怀疑的就是系统镜像的问题，然而在另外一台完全相同的机器上（公司集中采购的主机），这个镜像安装成功了，所以不是镜像的问题。

最后只能回到硬盘上了，别的都是一定没问题，硬盘只是看上去没问题，相比之下硬盘最可疑。

可惜公司并没有多的硬盘，“换硬盘”这种最简单的方法智能奢望。好在无意间发现了DiskGenius有一个检测磁盘坏区的功能，这才走出了困境。


## DiskGenius

用DiskGenius提供的工具查看后发现，问题果然出在硬盘上。简单说是硬盘靠前的柱面很多是有问题的。其中在柱面号772-796之间，只有4个正常柱面！

第1158柱面后，就只有少量有问题的柱面了，在5544-51491这一大块区域没有任何问题柱面，再往后就没看了，因为太耗时间，不过估计都是好的。

而之前失败的安装，是这样分配磁盘的：

| 名称   | 终止柱面 |
|:------:|:--------:|
| ESP    | 12       |
| MSR    | 29       |
| System | 15694    |
| Other  | 121601   |

如你所见，问题柱面刚好跳过了引导分区，被配到操作系统所用的那个分区的前部分。


## 解决方案

定位了这个问题之后，解决起来就容易了。这个硬盘很大，容量1T，坏掉的扇区比较少，而且集中，只要跳过它们就行了。

于是专门分出一个80G的分区，跳过那段“地雷区”，将系统盘放在后面，然后重新安装，问题解决了，安装成功！


