# 形参和实参
2016/12/05 15:50:00
Javascript


我记得自己刚学编程的时候，是没有形参和实参的概念的。实际上脑袋里面是有「参数」的概念的，只不过不了解其运作细节，也不知其意义所在。所以尽管书中经常提到这两个词，却没有引起我的注意。我猜测大概又是一种没啥用的概念吧，反正不影响写程序。


## 感知到

学会汇编语言之后，我才知道参数传递原来要做那么多事。那也第一次感知到，原来形参和实参并不是某种玄学，而是可以对应到栈，偏移量这些概念上的。

第二次感知到形参和实参，是尝试写解释器的时候，原来形参和函数内部定义的局部变量，没有任何区别，而实参则是另外一种不同的东西。

如果没有这两个经历，恐怕我只能「知道」形参与实参，而不能「感觉到」它们。


## 另觅他法

但是这带来一个问题。如果有一天，我要给我的表弟或者谁解释这两个概念，我要怎么让他们感知到这个呢？

教他们学汇编，还是教写解释器？这些方法都太耗时了，而且容易抹杀初学者的兴趣。

最近我发现了一个也许可行的办法，思路是这样的：只要明显看到两者的不同，就能体会到两者的区别了。

实现这个的关键在于一个奇葩语言：Javascript。


## 安全但也无奈

大多数编程语言，在形参和实参不一致的时候，就会报错。所以你通常没法知道形参和实参不一致是怎样一种体验。这个可以避免很多隐晦的Bug，但是却也限制了人的想象。

此时，Javascript登场了，漏出它长歪了的虎牙，傻笑道：我的形参就可以和实参不一样！


## 感知实参

在Javascript里面，每个用`function`定义的函数都默认绑定了一个变量`arguments`，它就是实参列表。现在你获得了感知到实参的办法。

```js
function test() {
  console.log(`Your arguments: ${Array.from(arguments)}`)
}
```

尽管没有定义形参，你仍然可以给它传递参数，于是出现了形参与实参不一致的地方

```js
test(1, 2, 3, 4, 5)
//=> Your arguments: 1,2,3,4,5
```


## 感知形参

有趣的是Javascript的函数还提供了一个属性`length`，让你知道函数定义了几个形参。你又获得了感知到形参的办法。

```js
(function a(x, y, z) {}).length
//=> 3

(function b() {}).length
//=> 0
```

你没有传递任何实参。又一个形参和实参不一致的例子。


## 只是尝试

靠这个到底能不能让初学编程的人感知到形参与实参的区别，我也不知道。但是我能确定的是，给他们提供不同的视角，肯定是没有坏处的。
