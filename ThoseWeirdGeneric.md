# 那些奇奇怪怪的泛型写法
2016/11/03 13:40:00
C++, Java, C#


语法沿袭C语言的静态类型语言都一些共同的特点，类型写在变量前面。这个引出了另外一个现象，在定义函数的时候，返回值类型也要写在最前面。因为函数从某种角度来看是一种特殊的变量，运行它相当于对普通变量做解引用，得到的是一个普通值。

```c
SomeType funcName(ArgType1 arg1, ArgType2 arg2)
```

由于这个特性，在往语言里面加入泛型函数的时候，C系的三个大佬用了各不相同的写法。


## 泛型函数的写法

Java把泛型参数写在最前面

```java
<T, X, Y> T func() {}
```

C#把泛型参数写在名字后面

```csharp
T func<T, X, Y>() {}
```

C++把泛型参数写在最前面

```c
template<class T, class X, class Y> T func() {}
```

定义泛型类的时候，就没有这么多分歧了，因为「类」是不存在返回值的。因此Java和C#用了一样的写法。


## 泛型类的写法

Java把泛型参数写在名字后面

```java
class MyClass<X, Y> {}
```

C#把泛型参数写在名字后面

```csharp
class MyClass<X, Y> {}
```

C++把泛型参数写在最前面

```c
template<class X, class Y> class MyClass {}
```

总体来看，C++和C#都保持了一致性。C#的泛型参数永远写在变量明后面，C++的泛型参数永远写在变量名前面。纠结是Java，一下前一下后的。

我猜测设计Java的时候，规定了泛型参数必须在使用前定义。所以在碰到泛型函数的时候，把泛型参数放在前面，因为函数的返回值也可能是泛型。

然而不清楚为什么，Java在设计泛型类的时候，又把它移到了后面？为什么不像C++那样保持一致？


## 其他种类语言如何？

除了C系列语法，其他的语言大都倾向于将类型写在变量后面。比如现在经常听到的`Go`, `Swift`, `Scala`, `Rust` …… 听说曾经的`Pascal`也是这样的。

而且这些语言大都用特殊的关键字来定义函数。比如`func`，`fn`等等。因此，函数的返回值类型也是自然而然地写到了后面。

所以定义泛型的时候，它们的一致性就比较强了。

比如Swift，它的泛型函数这样写

```swift
func myfunc<T>(arg1: T, arg2: T) -> T {}
```

Rust的写法几乎完全一样

```rust
fn myfunc<T>(arg1: T, arg2: T) -> T {}
```

个人感觉这种写法更好看。


